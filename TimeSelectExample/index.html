<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>time input</title>

    <link href="Lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="Lib/styles/headers.css" rel="stylesheet" />
    <script src="lib/debugHelper.js"></script>
    <link href="Lib/styles/index.css" rel="stylesheet" />
    <!--suppress no favicon-->
    <link rel="shortcut icon" href="#">

    <!-- styles are here temp and once okay move to a .css file(s) -->
    <style>
        .fieldset-style {
            width: 250px;
            margin: 0 auto;
            border: 2px solid #008080;
            padding: 10px;
            position: relative;
        }

        .legend-style {
            padding: 0 5px;
            font-weight: bold;
            color: #333;
            font-size: 1em;
            background-color: white;
            border: none;
        }
    </style>

</head>
<body>
    <!--
    Code by ChatGPT followed by css by Copilot
    -->
    <div class="nine mt-3">
        <h1>ChatGPT <span>time input 30-minute intervals</span></h1>
    </div>

    <main>

        <div class="container">

            <fieldset class="fieldset-style shadow mb-2">
                <legend class="legend-style">
                    Select a Time
                </legend>

                <label for="time-select">Choose a time:</label>
                <select id="time-select"
                        name="time-select"
                        class="form-select"
                        style="width: 200px;">
                </select>
                <button type="button" id="get_time" class="btn btn-success mt-3">
                    Show Selected Time
                </button>
                <div id="output" class="mt-3"></div>
            </fieldset>

        </div>

        <!-- ChatGPT had vh-100 which Karen removed as it was incorrect for this page vh-100 works for vanilla pages -->

        <div class="container  d-flex justify-content-center align-items-center">
            <div class="card shadow" style="width: 24rem;">
                <div class="card-header bg-primary text-white">
                    About
                </div>
                <div class="card-body">
                    <!-- WCAG violation, should be an H2 styled with  fs-4 from Bootstrap-->
                    <h5 class="card-title">Prototyping</h5>
                    <p class="card-text">
                        An example for showing
                    </p>
                    <ul>
                        <li>Using AI to save time</li>
                        <li>Time input with 30-minute interval</li>
                    </ul>

                </div>
            </div>
        </div>s

    </main>
    
    <!-- No need to move JS code as we are prototyping -->
    <script>
        document.addEventListener("DOMContentLoaded",
            () => {

                /*
                 * Provides the ability to add outlines to every single element on a page
                 * Usage: Pass true to toggle for development environment, false for other environments
                 * To invoke, press ALT+CTRL+1 which toggles adding/removing debugger.css
                */
                document.addEventListener('keydown',
                    function (event) {

                        if (event.key === '1' && event.altKey && event.ctrlKey) {
                            // this is for development environment
                            $debugHelper.toggle(true);
                        }

                    });

            });

    </script>

    <script>
        // generated by ChatGPT
        const timeSelect = document.getElementById("time-select");


        function generateTimeOptions(start = "00:00", end = "23:30", stepMinutes = 30, defaultValue = "08:00") {
            const pad = (num) => String(num).padStart(2, '0');
            const [startHour, startMin] = start.split(":").map(Number);
            const [endHour, endMin] = end.split(":").map(Number);

            let current = new Date();
            current.setHours(startHour, startMin, 0, 0);

            const endTime = new Date();
            endTime.setHours(endHour, endMin, 0, 0);

            while (current <= endTime) {
                let hours24 = current.getHours();
                let minutes = current.getMinutes();
                let hours12 = hours24 % 12 || 12;
                let ampm = hours24 < 12 ? 'AM' : 'PM';

                let value = `${pad(hours24)}:${pad(minutes)}`;
                let label = `${hours12}:${pad(minutes)} ${ampm}`;

                const option = document.createElement("option");
                option.value = value;
                option.textContent = label;

                if (value === defaultValue) {
                    option.selected = true;
                }

                timeSelect.appendChild(option);
                current.setMinutes(current.getMinutes() + stepMinutes);
            }
        }

        generateTimeOptions("00:00", "23:30", 30, "08:30");
    </script>
    <script>


        document.getElementById("get_time").addEventListener("click", function () {
            const select = document.getElementById('time-select');
            const selectedValue = select.value;
            const outputDiv = document.getElementById('output');

            if (selectedValue) {
                outputDiv.innerHTML = `<span class="badge bg-primary">Selected time: ${selectedValue}</span>`;
            } else {
                outputDiv.innerHTML = `
        <span class="badge bg-danger">Please select a time.</span>
      `;
            }
        });
    </script>
</body>
</html>
